{"instruction": "give an example of initializing amrex and finalizing it", "response": "#include <AMReX.H>\n#include <iostream>\n\nusing namespace amrex;\n\nint main(int argc, char* argv[])\n{\n    // Initialize AMReX (MPI, GPU backends, timers, etc.)\n    Initialize(argc, argv);\n\n    // Your code goes here\n    std::cout << \"AMReX is initialized!\" << std::endl;\n\n    // Finalize AMReX (clean up MPI, GPU resources, timers, etc.)\n    Finalize();\n\n    return 0;\n}"}
{"instruction": "give me an amrex example for writing a variable or field in the amrex data structure and plot it out", "response": "#include <AMReX.H>\n#include <AMReX_MultiFab.H>\n#include <AMReX_PlotFileUtil.H>\n#include <cmath>\n\nusing namespace amrex;\n\nint main(int argc, char* argv[])\n{\n    // Initialize AMReX\n    Initialize(argc, argv);\n\n    // Define a simple 32x32x32 domain\n    IntVect dom_lo(0,0,0), dom_hi(31,31,31);\n    Box domain(dom_lo, dom_hi);\n\n    // Create BoxArray and DistributionMapping\n    BoxArray ba(domain);\n    ba.maxSize(16);  // maximum grid size per box\n    DistributionMapping dm(ba);\n\n    // Create a MultiFab with 1 component and 0 ghost cells\n    MultiFab mf(ba, dm, 1, 0);\n\n    // Define real-space domain\n    RealBox real_box({0.,0.,0.}, {1.,1.,1.});\n    Geometry geom(domain, &real_box);\n\n    // Cell sizes\n    GpuArray<Real,3> dx = geom.CellSizeArray();\n\n    // Fill MultiFab with a Gaussian-like function\n    for (MFIter mfi(mf); mfi.isValid(); ++mfi)\n    {\n        const Box& bx = mfi.validbox();\n        auto arr = mf.array(mfi);\n\n        ParallelFor(bx, [=] AMREX_GPU_DEVICE(int i, int j, int k) {\n            Real x = (i + 0.5) * dx[0];\n            Real y = (j + 0.5) * dx[1];\n            Real z = (k + 0.5) * dx[2];\n\n            Real r2 = ((x-0.5)*(x-0.5) + (y-0.5)*(y-0.5) + (z-0.5)*(z-0.5)) / 0.01;\n            arr(i,j,k) = std::exp(-r2);\n        });\n    }\n\n    // Write the MultiFab to a plotfile\n    WriteSingleLevelPlotfile(\"plt001\", mf, {\"Gaussian\"}, geom, 0.0, 0);\n\n    // Finalize AMReX\n    Finalize();\n    return 0;\n}"}
